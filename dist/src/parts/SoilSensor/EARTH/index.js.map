{"version":3,"sources":["../src/parts/SoilSensor/EARTH/index.ts"],"names":[],"mappings":";;;;;;;;;;;AAaA,MAAqB,KAAK;IAoBtB;QACI,IAAI,CAAC,IAAI,GAAG,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,YAAY,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IACzC,CAAC;IArBM,MAAM,CAAC,IAAI;QACd,OAAO;YACH,IAAI,EAAE,OAAO;SAChB,CAAC;IACN,CAAC;IAmBM,KAAK,CAAC,KAAY;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAC7D,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAExC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,KAAa,EAAE,EAAE;YAC5B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACf,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC7B;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAEY,qBAAqB;;YAC9B,OAAO,MAAM,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;QACnC,CAAC;KAAA;IAEY,sBAAsB;;YAC/B,OAAO,MAAM,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;QACrC,CAAC;KAAA;CACJ;AA9CD,wBA8CC","file":"index.js","sourcesContent":["import Obniz from \"../../../obniz\";\nimport PeripheralAD from \"../../../obniz/libs/io_peripherals/ad\";\nimport PeripheralIO from \"../../../obniz/libs/io_peripherals/io\";\n\nimport ObnizPartsInterface, {ObnizPartsInfo} from \"../../../obniz/ObnizPartsInterface\";\n\nexport interface EARTHOptions {\n    vcc?: number;\n    aout: number;\n    dout: number;\n    gnd?: number;\n}\n\nexport default class EARTH implements ObnizPartsInterface {\n\n    public static info(): ObnizPartsInfo {\n        return {\n            name: \"EARTH\",\n        };\n    }\n\n    public keys: string[];\n    public requiredKeys: string[];\n    public params: any;\n\n    public value: any;\n    public onchange?: (value: number) => void;\n\n    protected obniz!: Obniz;\n\n    private ad!: PeripheralAD;\n    private io!: PeripheralIO;\n\n    constructor() {\n        this.keys = [\"vcc\", \"aout\", \"dout\", \"gnd\"];\n        this.requiredKeys = [\"aout\", \"dout\"];\n    }\n\n    public wired(obniz: Obniz) {\n        this.obniz = obniz;\n        this.obniz.setVccGnd(this.params.vcc, this.params.gnd, \"5v\");\n        this.ad = obniz.getAD(this.params.aout);\n        this.io = obniz.getIO(this.params.dout);\n\n        this.ad.start((value: number) => {\n            this.value = value;\n            if (this.onchange) {\n                this.onchange(this.value);\n            }\n        });\n    }\n\n    public async getAnalogHumidityWait() {\n        return await this.ad.getWait();\n    }\n\n    public async getDigitalHumidityWait() {\n        return await this.io.inputWait();\n    }\n}\n"]}