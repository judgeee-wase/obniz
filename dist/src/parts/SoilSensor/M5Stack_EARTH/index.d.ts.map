{"version":3,"sources":["../src/parts/SoilSensor/M5Stack_EARTH/index.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,MAAM,gBAAgB,CAAC;AAInC,OAAO,mBAAmB,EAAE,EAAC,cAAc,EAAC,MAAM,oCAAoC,CAAC;AAEvF,MAAM,WAAW,oBAAoB;IACjC,GAAG,CAAC,EAAE,MAAM,CAAC;IACb,IAAI,EAAE,MAAM,CAAC;IACb,IAAI,EAAE,MAAM,CAAC;IACb,GAAG,CAAC,EAAE,MAAM,CAAC;CAChB;AAED,MAAM,CAAC,OAAO,OAAO,aAAc,YAAW,mBAAmB;WAE/C,IAAI,IAAI,cAAc;IAM7B,IAAI,EAAE,MAAM,EAAE,CAAC;IACf,YAAY,EAAE,MAAM,EAAE,CAAC;IACvB,MAAM,EAAE,GAAG,CAAC;IAEZ,KAAK,EAAE,GAAG,CAAC;IACX,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM,KAAK,IAAI,CAAC;IAE1C,SAAS,CAAC,KAAK,EAAG,KAAK,CAAC;IAExB,OAAO,CAAC,EAAE,CAAgB;IAC1B,OAAO,CAAC,EAAE,CAAgB;;IAOnB,KAAK,CAAC,KAAK,EAAE,KAAK;IAcZ,qBAAqB;IAIrB,sBAAsB;CAGtC","file":"index.d.ts","sourcesContent":["import Obniz from \"../../../obniz\";\nimport PeripheralAD from \"../../../obniz/libs/io_peripherals/ad\";\nimport PeripheralIO from \"../../../obniz/libs/io_peripherals/io\";\n\nimport ObnizPartsInterface, {ObnizPartsInfo} from \"../../../obniz/ObnizPartsInterface\";\n\nexport interface M5Stack_EARTHOptions {\n    vcc?: number;\n    aout: number;\n    dout: number;\n    gnd?: number;\n}\n\nexport default class M5Stack_EARTH implements ObnizPartsInterface {\n\n    public static info(): ObnizPartsInfo {\n        return {\n            name: \"M5Stack_EARTH\",\n        };\n    }\n\n    public keys: string[];\n    public requiredKeys: string[];\n    public params: any;\n\n    public value: any;\n    public onchange?: (value: number) => void;\n\n    protected obniz!: Obniz;\n\n    private ad!: PeripheralAD;\n    private io!: PeripheralIO;\n\n    constructor() {\n        this.keys = [\"vcc\", \"aout\", \"dout\", \"gnd\"];\n        this.requiredKeys = [\"aout\", \"dout\"];\n    }\n\n    public wired(obniz: Obniz) {\n        this.obniz = obniz;\n        this.obniz.setVccGnd(this.params.vcc, this.params.gnd, \"5v\");\n        this.ad = obniz.getAD(this.params.aout);\n        this.io = obniz.getIO(this.params.dout);\n\n        this.ad.start((value: number) => {\n            this.value = value;\n            if (this.onchange) {\n                this.onchange(this.value);\n            }\n        });\n    }\n\n    public async getAnalogHumidityWait() {\n        return await this.ad.getWait();\n    }\n\n    public async getDigitalHumidityWait() {\n        return await this.io.inputWait();\n    }\n}\n"]}